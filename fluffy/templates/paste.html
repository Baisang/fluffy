{% set page_name = 'paste' %}
{% extends 'layouts/base.html' %}

{% block head_extra %}
    <link href='https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Source+Code+Pro:500,700' rel='stylesheet' type='text/css'>
{% endblock %}

{% block content %}
    <div id="paste">
        <div class="line-numbers">
            {% for i in range(num_lines) %}
                <a href="#L{{i}}" id="L{{i}}">{{i}}</a>
            {% endfor %}
        </div>
        <div class="text" contenteditable="true" spellcheck="false">
            {{text|highlight|safe}}</pre>
        </div>
    </div>
{% endblock %}

{% block inline_js %}
    <!-- TODO: can we factor out jQuery? -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script>
        var whitelistedKeys = [
            // arrow keys
            37, 38, 39, 40,
        ];
        $(document).ready(function() {
            $('#paste').on('keydown', function(e) {
                if (e.ctrlKey) {
                    return true;
                }
                if ($.inArray(e.which, whitelistedKeys) !== -1) {
                    return true;
                }
                return false;
            });
        });
    </script>
{% endblock %}
